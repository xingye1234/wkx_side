# name: GitHub Actions Build and Deploy Demo
# on:
#   push:
#     branches:
#       - main
# jobs:
# build-and-deploy:
#   runs-on: macos-latest
#   steps:
#   - name: Checkout
#     uses: actions/checkout@v3

#   - name: Build and Deploy
#     uses: JamesIves/github-pages-deploy-action@v4.5.0
#     with:
#       folder:dist
#     env:
#       ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
#       BRANCH: react-pages
#       FOLDER: dist
#       BUILD_SCRIPT: npm install && npm run build

# build-and-deploy:
#   runs-on: macos-latest
#   steps:
#     - name: Checkout ğŸ›ï¸
#       uses: actions/checkout@main

#     - name: Install and Build ğŸ”§ # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.
#       run: |
#         npm ci
#         npm run build

#     - name: Deploy ğŸš€
#       uses: JamesIves/github-pages-deploy-action@v4
#       with:
#         folder: build # The folder the action should deploy.

# build-and-deploy:
#   runs-on: ubuntu-latest
#   steps:
#   - name: Checkout
#     uses: actions/checkout@v4

#   - name: Install and Build # ä¸‹è½½ä¾èµ– æ‰“åŒ…é¡¹ç›®
#     run: |
#       npm install
#       npm run build

#   - name: Build and Deploy
#     uses: JamesIves/github-pages-deploy-action@v4
#     with:
#       folder: dist
#       branch: master
# å°†é™æ€å†…å®¹éƒ¨ç½²åˆ° GitHub Pages çš„ç®€æ˜“å·¥ä½œæµç¨‹
name: Deploy static content to Pages

on:
  # ä»…åœ¨æ¨é€åˆ°é»˜è®¤åˆ†æ”¯æ—¶è¿è¡Œã€‚
  push:
    branches: ["main"]

  # è¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ä½ æ‰‹åŠ¨åœ¨ Action tab é¡µé¢è§¦å‘å·¥ä½œæµ
  workflow_dispatch:

# è®¾ç½® GITHUB_TOKEN çš„æƒé™ï¼Œä»¥å…è®¸éƒ¨ç½²åˆ° GitHub Pagesã€‚
permissions:
  contents: read
  pages: write
  id-token: write

# å…è®¸ä¸€ä¸ªå¹¶å‘çš„éƒ¨ç½²
concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  # å•æ¬¡éƒ¨ç½²çš„å·¥ä½œæè¿°
  deploy:
    # environment:
    #   name: github-pages
    #   url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Set up Node
        uses: actions/setup-node@v3
        with:
          node-version: 20
          cache: "npm"
      - name: Install dependencies
        run: npm install
      - name: Build
        run: npm run build
      - name: Setup Pages
        uses: actions/configure-pages@v3
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v2
        with:
          # Upload dist repository
          path: "./dist"
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v2
